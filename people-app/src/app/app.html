<!-- controls the entire People Manager App interface. -->


<!-- controls the entire People Manager App interface. -->

<!-- Login screen -->
<section *ngIf="loginVisible" class="form-card" style="max-width:320px;margin:auto;margin-top:100px;">
  <h2 class="form-title">ğŸ” Welcome to People Manager App</h2>
  <p style="text-align:center;color:#596579;">Please log in to continue</p>

  <div class="form-group">
    <label>Username</label>
    <input type="text" [(ngModel)]="username" placeholder="Enter username" />
  </div>

  <div class="form-group">
    <label>Password</label>
    <input type="password" [(ngModel)]="password" placeholder="Enter password" />
  </div>

  <button class="btn-primary" (click)="login()">Login</button>

  <div *ngIf="loginError" class="status-message" style="background:#f8d7da;color:#842029;border-color:#f5c2c7;">
    {{ loginError }}
  </div>
</section>

<!-- The application is displayed only after logging in -->
<ng-container *ngIf="!loginVisible">
  <div class="page">
    <header class="hero">
      <h1>People Manager App</h1>
      <p>Manage your people database ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</p>

      <div class="actions">
        <button class="btn" (click)="AddPeople()">Add Person</button>
        <button class="btn" (click)="DeletePeople()">Delete Person</button>
        <button class="btn" (click)="UpdatePeople()">Update Person</button>
        <button class="btn" (click)="ShowPeople()">View All People</button>
      </div>
    </header>

    <!-- Add People -->
    <section *ngIf="addPeopleVisible" class="form-card">
      <h2 class="form-title">â• Add a New Person</h2>

      <form (ngSubmit)="PeopleSubmit()" #addForm="ngForm" novalidate>
        <div class="form-group">
          <label>First Name</label>
          <input type="text" [(ngModel)]="firstName" name="firstName" required placeholder="Enter first name" />
        </div>

        <div class="form-group">
          <label>Last Name</label>
          <input type="text" [(ngModel)]="lastName" name="lastName" required placeholder="Enter last name" />
        </div>

        <div class="form-group">
          <label>ID Number</label>
          <input type="text" [(ngModel)]="personId" name="personId" required placeholder="9 digits" />
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="email" name="email" required placeholder="example@mail.com" />
        </div>

        <div class="form-group">
          <label>Phone</label>
          <input type="text" [(ngModel)]="phone" name="phone" required placeholder="05xxxxxxxx" />
        </div>

        <button class="btn-primary" type="submit">ğŸ’¾ Save</button>
      </form>

      <div *ngIf="addStatusMessage" class="status-message">
        {{ addStatusMessage }}
      </div>
    </section>

    <!-- Delete People -->
    <section *ngIf="deletePeopleVisible" class="card">
      <h2 class="card-title">ğŸ—‘ï¸ Delete People</h2>

      <input
        type="text"
        [(ngModel)]="searchTerm"
        name="searchDelete"
        class="search"
        placeholder="Search by nameâ€¦"
      />

      <ul class="people-list" *ngIf="getFilteredPeople().length; else emptyDelete">
        <li *ngFor="let p of getFilteredPeople()">
          <span class="person-name">{{ p.firstName }} {{ p.lastName }}</span>
          <button class="btn-danger" (click)="askDelete(p)">Delete</button>
        </li>
      </ul>

      <ng-template #emptyDelete>
        <div class="status-message" style="background:#fff3cd;color:#7a5d00;border-color:#ffe08a;">
          No people found in database
        </div>
      </ng-template>

      <!-- deletion status + Undo -->
      <div *ngIf="deletionMessage" class="status-message">
        {{ deletionMessage }}
        <button
          *ngIf="lastDeletedPerson"
          class="btn"
          style="margin-left:8px;"
          (click)="undoLastDelete()"
        >
          Undo
        </button>
      </div>

      <!-- confirmation modal -->
      <div class="modal-overlay" *ngIf="confirmDeleteVisible" (click)="cancelDelete()">
        <div class="modal" (click)="$event.stopPropagation()">
          <p>
            Are you sure you want to delete
            <strong>{{ candidateToDelete?.firstName }} {{ candidateToDelete?.lastName }}</strong>?
          </p>
          <div class="modal-actions">
            <button class="btn-yes" (click)="confirmDelete()">Yes</button>
            <button class="btn-no" (click)="cancelDelete()">No</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Show People -->
    <section *ngIf="showPeopleVisible" class="card">
      <h2 class="card-title">ğŸ‘¥ All People in Database</h2>

      <input
        type="text"
        [(ngModel)]="searchTerm"
        name="searchShow"
        class="search"
        placeholder="Search by nameâ€¦"
      />

      <div class="table-wrap" *ngIf="getFilteredPeople().length; else emptyShow">
        <table class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Full Name</th>
              <th>Email</th>
              <th>Phone</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let p of getFilteredPeople()">
              <td>{{ p.id }}</td>
              <td>{{ p.firstName }} {{ p.lastName }}</td>
              <td>{{ p.email }}</td>
              <td>{{ p.phone }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <ng-template #emptyShow>
        <div class="status-message" style="background:#fff3cd;color:#7a5d00;border-color:#ffe08a;">
          No people in database
        </div>
      </ng-template>
    </section>

    <!-- Update People -->
    <section *ngIf="updatePeopleVisible" class="card">
      <h2 class="card-title">âœï¸ Update People</h2>

      <input
        type="text"
        [(ngModel)]="searchTerm"
        name="searchUpdate"
        class="search"
        placeholder="Search by nameâ€¦"
      />

      <ul class="people-list" *ngIf="getFilteredPeople().length; else emptyUpdate">
        <li *ngFor="let p of getFilteredPeople()">
          <span class="person-name">{{ p.firstName }} {{ p.lastName }}</span>
          <button class="btn-primary" (click)="editPerson(p)">Edit</button>
        </li>
      </ul>

      <ng-template #emptyUpdate>
        <div class="status-message" style="background:#fff3cd;color:#7a5d00;border-color:#ffe08a;">
          No people available to update
        </div>
      </ng-template>

      <div *ngIf="editMode" class="form-card" style="margin-top:20px;">
        <h3 class="form-title">Update Details</h3>

        <div class="form-group">
          <label>First Name</label>
          <input type="text" [(ngModel)]="firstName" />
        </div>

        <div class="form-group">
          <label>Last Name</label>
          <input type="text" [(ngModel)]="lastName" />
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="email" />
        </div>

        <div class="form-group">
          <label>Phone</label>
          <input type="text" [(ngModel)]="phone" />
        </div>

        <button class="btn-primary" (click)="submitUpdate()">ğŸ’¾ Save Changes</button>

        <div *ngIf="updateStatusMessage" class="status-message">
          {{ updateStatusMessage }}
        </div>
      </div>
    </section>
  </div>
</ng-container>
